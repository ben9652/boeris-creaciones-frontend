<p-toast></p-toast>
<div class="rawMaterial-data-form-view">
    <div class="rawMaterial-data-form">
        <div>
            <app-image-manager></app-image-manager>
        </div>
        <div>
            <app-category-manager  (warningMessage)="showWarningMessage($event)" (nameOfCategory)="setModalCategoryName($event)"></app-category-manager>
            <div class="data-text">
                <input type="text" pInputText placeholder="Nombre" [disabled]="this.disabledEdition()" [ngModel]="this.rawMaterialCatalogService.selectedRawMaterial()?.name" (ngModelChange)="updateRawMaterialName($event)"/>
                <p-dropdown [options]="units" optionLabel="name" placeholder="Unidades" [style]="{ width: '100%' }" emptyMessage="No se encontraron unidades" [disabled]="this.disabledEdition()" [ngModel]="this.rawMaterialCatalogService.selectedRawMaterial()?.unit" (ngModelChange)="updateRawMaterialUnit($event)"/>
                
                <p-dropdown [options]="sources" optionLabel="value" placeholder="Origen" [style]="{ width: '100%' }" emptyMessage="No se encontraron origenes" [disabled]="this.disabledEdition()" [ngModel]="getSourceValue()" (ngModelChange)="updateRawMaterialSource($event)"/>

                <textarea rows="5" cols="30" pInputTextarea [autoResize]="true" placeholder="Comentario" [disabled]="this.disabledEdition()" [ngModel]="this.rawMaterialCatalogService.selectedRawMaterial()?.comment" (ngModelChange)="updateRawMaterialComment($event)"></textarea>
            </div>
        </div>
    </div>
    <div class="rawMaterial-data-form-buttons">
        <p-button label="Cancelar" severity="secondary" [disabled]="this.disabledEdition()" (onClick)="clickOnCancel()"></p-button>
        <p-button label="Confirmar" [disabled]="this.disabledEdition()" (onClick)="clickOnConfirm()"></p-button>
    </div>
</div>
<p-dialog header="{{ this.rawMaterialCatalogService.modalTitle }} Rubro" [modal]="true" [(visible)]="this.rawMaterialCatalogService.modalVisibility" [style]="{ width: '25rem' }">
    <div class="flex align-items-center gap-3 mt-3 mb-3">
        <label for="category" class="font-semibold w-6rem">Rubro</label>
        <input pInputText id="category" class="flex-auto" [(ngModel)]="newCategoryName" autocomplete="off"/>
    </div>
    <div class="flex justify-content-end gap-2">
        <p-button label="Cancelar" severity="secondary" (onClick)="clickOnModalCancel()"/>
        <p-button label="Confirmar" (onClick)="clickOnModalConfirm()"/>
    </div>
</p-dialog>